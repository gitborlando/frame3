<html>
  <body>
    <div id="div1"></div>
    <div id="div2"></div>
    <button id="btn">btn</button>
    <button id="btn2">btn2</button>
  </body>
  <script src="../lib/index.js"></script>
  <!-- <script type="module">
    const { computed, effect, reactive } = frame3

    const count = reactive({ a: 'abc' })
    const compute = computed(() => count.value.a * 2)

    let i = 0
    effect(() => {
      console.log(compute.value)
    })
    // 直接xx会触发get, 而() => xx这样不会

    btn.onclick = () => {
      count.value.a++
    }
  </script> -->

  <!-- <script type="module">
    const { computed, effect, reactive } = frame3

    const count = reactive(0)
    const compute = computed(() => count.value * 2)
    const compute2 = computed(() => () => 'abc')

    let o = {
      c: compute2.value,
    }
    effect(() => {
      console.log(compute.value)
      console.log(compute2.value === o.c)
    })
    // 直接xx会触发get, 而() => xx这样不会

    btn.onclick = () => {
      count.value++
    }
  </script> -->

  <!-- <script type="text/babel">
    console.log('-----------------------------------------------------------------------')
    ref: a = 0
    effect: console.log((() => a)())

    btn.onclick = () => a++
  </script>

  <script type="text/babel">
    console.log('-----------------------------------------------------------------------')
    ref: a = 0
    frame3.effect((b) => console.log(a, b.i++), { i: 123 })

    btn.onclick = () => a++
  </script> -->
</html>

<script type="module">
  const a = frame3.reactive({ num1: 10, num2: 20 })

  frame3.effect(
    function f1() {
      const b = frame3.computed(() => {
        console.log(`a.num2: ${a.value.num2}`)
      })
      console.log(`b: ${b.value}`)
      console.log(`a.num1: ${a.value.num1}`)
      return 2
    },
    { n: 'f1' }
  )

  btn.onclick = () => a.value.num1++
  btn2.onclick = () => a.value.num2++
</script>
