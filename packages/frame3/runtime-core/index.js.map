{
  "version": 3,
  "sources": ["src/types.ts", "src/life-cycles.ts", "src/scheduler.ts", "src/shared.ts", "src/reactive.ts", "src/component.ts", "src/diff.ts", "src/render-dom.ts", "src/vnode.ts", "src/router.ts", "src/theme.ts"],
  "sourcesContent": ["/** vnode\u7C7B\u578B */\r\nexport const VnodeType = {\r\n  /** \u5143\u7D20\u8282\u70B9\u7C7B\u578B */\r\n  element: 'element',\r\n  /** \u6587\u672C\u8282\u70B9\u7C7B\u578B */\r\n  textNode: 'textNode',\r\n  /** \u7247\u6BB5\u8282\u70B9\u7C7B\u578B */\r\n  fragment: 'fragment',\r\n  /** \u7EC4\u4EF6\u8282\u70B9\u7C7B\u578B */\r\n  component: 'component',\r\n} as const\r\n\r\n/** jsx\u7684tag\u6807\u7B7E, \u53EF\u4EE5\u662F\r\n * - Function(\u7EC4\u4EF6)\r\n * - string(html\u6807\u7B7E)\r\n * - 0(document.createTextNode)\r\n * - \\[\\](jsx\u7684\u8FD9\u4E2A`<></>`\u4E1C\u4E1C)\r\n */\r\nexport type IVnodeJsxTag = IComponentFunction | [] | string | 0\r\n\r\n/** \u56DB\u4E2Avnode\u7C7B\u578B */\r\nexport type IVnodeType = (typeof VnodeType)[keyof typeof VnodeType]\r\nexport type IVnodeProps = Record<string, any>\r\n\r\n/**\r\n * \u7EC4\u4EF6\u51FD\u6570\u6267\u884C\u4F1A\u8FD4\u56DE\u4E00\u4E2A\u6E32\u67D3\u51FD\u6570, \u5373\u8FD9\u4E2A`() => IVnode`.\r\n * \u8FD9\u4E2A\u6E32\u67D3\u51FD\u6570\u6BCF\u6B21\u66F4\u65B0\u90FD\u4F1A\u6267\u884C, \u5E76\u91CD\u65B0\u751F\u6210\u65B0\u7684vnode.\r\n * \u800C\u7EC4\u4EF6\u51FD\u6570\u672C\u8EAB\u5219\u76F8\u5F53\u4E8E`setup`\u51FD\u6570, \u53EA\u4F1A\u6267\u884C\u4E00\u6B21.\r\n */\r\nexport type IComponentFunction = (props: IVnodeProps) => () => IVnode\r\n\r\n/** \u865A\u62DFdom\u5BF9\u8C61 */\r\nexport type IVnodeBase = {\r\n  /** vnode\u7684\u7C7B\u578B, \u6BD4\u5982\u662Fdom\u8282\u70B9\u8FD8\u662F\u7EC4\u4EF6\u6216\u8005\u5176\u4ED6\u5565\u7684 */\r\n  type: IVnodeType\r\n  props: IVnodeProps\r\n  key: any\r\n}\r\n\r\n/** \u7EC4\u4EF6vnode | <></>vnode | \u539F\u751Felement vnode | \u6587\u672C\u8282\u70B9vnode */\r\nexport type IVnode = IComponentVnode | IFragmentVnode | IElementVnode | ITextNodeVnode\r\n\r\n/** \u7EC4\u4EF6vnode */\r\nexport type IComponentVnode = Omit<IVnodeBase, 'jsxTag'> & {\r\n  /**\r\n   * \u7C7B\u4F3CApp, Button\u7B49, \u5176\u6267\u884C\u4F1A\u8FD4\u56DE\u4E00\u4E2A\u6E32\u67D3\u51FD\u6570, \u7531\u6E32\u67D3\u51FD\u6570\u751F\u6210vnode\r\n   */\r\n  componentFunction: IComponentFunction\r\n  componentInstance: IComponentInstance | null\r\n  el: Element | Text | null\r\n  children: any[]\r\n}\r\n/** \u539F\u751Felement vnode */\r\nexport type IElementVnode = Omit<IVnodeBase, 'jsxTag'> & {\r\n  /** \u539F\u751F\u7684 html \u6807\u7B7E */\r\n  tagName: string\r\n  el: Element | null\r\n  children: IVnode[]\r\n}\r\n/** \u6587\u672C\u8282\u70B9vnode */\r\nexport type ITextNodeVnode = Omit<IVnodeBase, 'jsxTag'> & {\r\n  el: Text | null\r\n  children: string[]\r\n}\r\n/**\r\n * jsx\u91CC\u7684`<></>`\u8FD9\u79CD\u4E1C\u4E1C, \u6587\u6863\u7247\u6BB5vnode\r\n *\r\n * \u7531\u4E8E\u662F\u6587\u6863\u7247\u6BB5, \u6240\u4EE5\u5176\u5E76\u6CA1\u6709\u4E00\u4E2A\"\u72EC\u4EAB\u7684\"\u7236\u771F\u5B9E\u8282\u70B9, \u800C\u662F\u548C\u5176\u4ED6vnode\u5171\u4EAB\u4E00\u4E2A\u7236\u771F\u5B9E\u8282\u70B9.\r\n * \u6240\u4EE5\u9700\u8981\u4E00\u524D\u4E00\u540E\u8FDE\u4E2A\u7A7A\u7684textNode\u8282\u70B9\u6765\u786E\u5B9A\u4F4D\u7F6E(\u7A7A\u7684textNode\u5728\u5176\u7236\u8282\u70B9\u5185\u771F\u5B9E\u5B58\u5728, \u4F46\u4E0D\u4F1A\u88AB\u7ED8\u5236\u5230\u9875\u9762\u4E0A).\r\n */\r\nexport type IFragmentVnode = Omit<IVnodeBase, 'jsxTag'> & {\r\n  /** \u7A7AtextNode */\r\n  el: Text | null\r\n  /** \u7A7AtextNode */\r\n  anchor: Text | null\r\n  children: any[]\r\n}\r\n\r\nexport const LifeCycle = {\r\n  beforeMount: 'beforeMount',\r\n  mounted: 'mounted',\r\n  beforeUpdate: 'beforeUpdate',\r\n  updated: 'updated',\r\n  beforeUnMount: 'beforeUnMount',\r\n  unMounted: 'unMounted',\r\n} as const\r\n\r\n/** \u516D\u4E2A\u751F\u547D\u5468\u671F\u7C7B\u578B */\r\nexport type ILifeCycleTypes = (typeof LifeCycle)[keyof typeof LifeCycle]\r\n\r\n/** \u7EC4\u4EF6\u5B9E\u4F8B */\r\nexport type IComponentInstance = {\r\n  isMounted: boolean\r\n  /** \u5B50\u7EA7 vnode */\r\n  subVnode: IVnode\r\n  /** \u7EC4\u4EF6\u51FD\u6570\u7684arguments(\u4E00\u4E2A\u5BF9\u8C61) */\r\n  props: IVnodeProps\r\n  lifeCycles: Record<ILifeCycleTypes, Set<Function>>\r\n  /** \u7EC4\u4EF6\u66F4\u65B0, \u5982\u679Cvnode\u6CA1\u6302\u8F7D\u5C31\u6302\u8F7D, \u6302\u8F7D\u4E86\u5C31\u66F4\u65B0 */\r\n  update: IEffectCallback\r\n  /**\r\n   * \u7236\u7EC4\u4EF6\u66F4\u65B0\u5BFC\u81F4\u7684\u88AB\u52A8\u66F4\u65B0. \u4F1A\u4F20\u5165\u65B0\u7684props\u548Cchildren,\r\n   * \u5E76\u91CD\u65B0\u6267\u884C\u7EC4\u4EF6\u51FD\u6570\u751F\u6210\u65B0\u7684\u6E32\u67D3\u51FD\u6570, \u6E32\u67D3\u51FD\u6570\u6267\u884C\u751F\u6210\u65B0\u7684vnode\r\n   */\r\n  passiveUpdate(props: IVnodeProps, children: any): void\r\n}\r\n\r\n/** \u5728effect api\u8C03\u7528\u65F6\u4F20\u5165\u7684\u56DE\u8C03, \u4E0D\u8FC7\u7ECF\u8FC7\u4E86\u7279\u6B8A\u5904\u7406 */\r\nexport type IEffectCallback = {\r\n  (): void\r\n  /** \u7EC4\u4EF6\u5378\u8F7D\u65F6\u7F6E\u4E3Afalse, false\u4E86\u7684\u56DE\u8C03\u4E0D\u518D\u6267\u884C */\r\n  active: boolean\r\n  /** \u8C03\u5EA6\u5668 */\r\n  scheduler?: Function\r\n}\r\n", "import { IComponentInstance, ILifeCycleTypes, LifeCycle } from './types'\r\n\r\nlet currentComponentInstance: IComponentInstance | null = null\r\n\r\n/**\r\n * \u5728\u6BCF\u6B21\u7EC4\u4EF6\u51FD\u6570\u6267\u884C\u65F6\u90FD\u8BBE\u7F6E\u5F53\u524D\u7684\u7EC4\u4EF6\u5B9E\u4F8B, \u4EE5\u4FBF\u751F\u547D\u5468\u671Fhooks\u6267\u884C\u65F6\u80FD\u5C06\u5176\u56DE\u8C03\u52A0\u5165\u5230\u5F53\u524D\u7EC4\u4EF6\u4E0A\r\n */\r\nexport function setCurrentComponentInstance(componentInstance: IComponentInstance | null) {\r\n  currentComponentInstance = componentInstance\r\n}\r\n\r\n/**\r\n * \u8FD4\u56DE\u4E00\u4E2A\u5BF9\u8C61, \u952E\u4E3A\u751F\u547D\u5468\u671F\u7C7B\u578B, \u503C\u4E3A\u7A7ASet\u5BF9\u8C61\r\n */\r\nexport function initLifeCycles() {\r\n  return Object.fromEntries(Object.keys(LifeCycle).map((key) => [key, new Set()])) as IComponentInstance['lifeCycles']\r\n}\r\n\r\n/**\r\n * \u6267\u884C\u7EC4\u4EF6\u5B9E\u4F8B\u4E0A\u7684\u751F\u547D\u5468\u671F\u56DE\u8C03\r\n */\r\nexport function implementLifeCycles(componentInstance: IComponentInstance) {\r\n  return (type: ILifeCycleTypes) => componentInstance.lifeCycles[type].forEach((callback) => callback())\r\n}\r\n\r\nexport function onBeforeMount(callback: Function) {\r\n  injectLifeCycle('beforeMount', callback)\r\n}\r\nexport function onMounted(callback: Function) {\r\n  injectLifeCycle('mounted', callback)\r\n}\r\nexport function onBeforeUpdate(callback: Function) {\r\n  injectLifeCycle('beforeUpdate', callback)\r\n}\r\nexport function onUpdated(callback: Function) {\r\n  injectLifeCycle('updated', callback)\r\n}\r\nexport function onBeforeUnMount(callback: Function) {\r\n  injectLifeCycle('beforeUnMount', callback)\r\n}\r\nexport function onUnMounted(callback: Function) {\r\n  injectLifeCycle('unMounted', callback)\r\n}\r\n\r\n/**\r\n * \u5728\u7EC4\u5EFA\u5B9E\u4F8B\u7684lifecycle\u5BF9\u8C61\u4E0A\u52A0\u5165\u67D0\u4E00\u7C7B\u578B\u7684\u751F\u547D\u5468\u671F\u56DE\u8C03\r\n */\r\nfunction injectLifeCycle(type: ILifeCycleTypes, callbacks: Function) {\r\n  currentComponentInstance?.lifeCycles[type].add(callbacks)\r\n}\r\n", "/**\r\n * \u6240\u8C13\u4E00\u4E2Atick\u662F\u6307\u6D4F\u89C8\u5668\u7684\u4E00\u4E2A\u6E32\u67D3\u5E27, \u53EF\u4EE5\u8FD1\u4F3C\u7406\u89E3\u4E3A\u65F6\u957F\u4E3A16ms\u7684\u4E00\u4E2A\u95F4\u9694, \u5C31\u662F\u8BF4\u4E00\u822C\u4E00\u79D2\u5185\u4F1A\u670960\u4E2Atick\r\n */\r\n\r\nconst effectQueue = new Set<() => void>()\r\nconst promiseResolve = Promise.resolve()\r\nlet tickStatus: 'this tick has added' | 'is next tick can add' = 'is next tick can add'\r\nlet currentPromiseResolve: Promise<any> | null = null\r\n\r\n/**\r\n * \u628A\u56DE\u8C03\u653E\u5728\u5FAE\u4EFB\u52A1\u91CC\u6267\u884C\r\n */\r\nexport function nextTick(callback: () => void) {\r\n  const resolve = currentPromiseResolve || promiseResolve\r\n  return callback ? resolve.then(callback) : resolve\r\n}\r\n\r\n/**\r\n * \u628Aeffect\u56DE\u8C03\u6DFB\u52A0\u5230\u961F\u5217\u91CC, \u7136\u540E\u518D\u6D4F\u89C8\u5668\u6267\u884C\u5FAE\u4EFB\u52A1\u65F6\u53BB\u7EDF\u4E00\u6267\u884C\r\n */\r\nexport function queueScheduler(effect: () => void) {\r\n  if (effectQueue.has(effect)) return\r\n  effectQueue.add(effect)\r\n  effectQueueAddedToTickMicrotasks()\r\n}\r\n\r\n/**\r\n * \u5728\u4E00\u4E2Atick\u5185\u53EA\u4F1A\u628A`runAllEffectsInOneTick`\u6DFB\u52A0\u5230\u5FAE\u4EFB\u52A1\u91CC\u4E00\u6B21,\r\n * \u4F46\u6BCF\u4E00\u4E2Atick\u90FD\u4F1A\u628A`runAllEffectsInOneTick`\u6DFB\u52A0\u5230\u5FAE\u4EFB\u52A1\u91CC\u4E00\u6B21\r\n */\r\nfunction effectQueueAddedToTickMicrotasks() {\r\n  if (tickStatus === 'this tick has added') return\r\n  currentPromiseResolve = promiseResolve.then(runAllEffectsInOneTick)\r\n  tickStatus = 'this tick has added'\r\n}\r\n\r\n/**\r\n * \u6E05\u7A7A\u6267\u884C\u961F\u5217\u91CC\u7684\u56DE\u8C03, \u5168\u90E8\u6267\u884C\u5B8C\u540E\u5C06\u5F53\u524Dtick\u72B6\u6001\u8BBE\u4E3A\u53EF\u6DFB\u52A0\r\n */\r\nfunction runAllEffectsInOneTick() {\r\n  try {\r\n    effectQueue.forEach((effect) => effect())\r\n  } finally {\r\n    tickStatus = 'is next tick can add'\r\n    effectQueue.clear()\r\n    currentPromiseResolve = null\r\n  }\r\n}\r\n", "import { IComponentVnode, IElementVnode, IFragmentVnode, ITextNodeVnode, IVnode, VnodeType } from './types'\r\n\r\nexport const is = {\r\n  string: (obj: any): obj is string => Object.prototype.toString.call(obj) === '[object String]',\r\n  number: (obj: any): obj is number => Object.prototype.toString.call(obj) === '[object Number]',\r\n  boolean: (obj: any): obj is boolean => Object.prototype.toString.call(obj) === '[object Boolean]',\r\n  undefined: (obj: any): obj is undefined => Object.prototype.toString.call(obj) === '[object Undefined]',\r\n  null: (obj: any): obj is undefined => Object.prototype.toString.call(obj) === '[object Null]',\r\n  function: (obj: any): obj is Function => Object.prototype.toString.call(obj) === '[object Function]',\r\n  object: (obj: any): obj is object => Object.prototype.toString.call(obj) === '[object Object]',\r\n  array: (obj: any): obj is any[] => Object.prototype.toString.call(obj) === '[object Array]',\r\n  multi(obj: any, types: string): boolean {\r\n    // @ts-ignore\r\n    return types.split('|').some((type) => this[type.trim()]?.(obj))\r\n  },\r\n}\r\n\r\nexport const vnodeIs = {\r\n  component: (vnode: IVnode | null): vnode is IComponentVnode => vnode?.type === VnodeType.component,\r\n  fragment: (vnode: IVnode | null): vnode is IFragmentVnode => vnode?.type === VnodeType.fragment,\r\n  element: (vnode: IVnode | null): vnode is IElementVnode => vnode?.type === VnodeType.element,\r\n  textNode: (vnode: IVnode | null): vnode is ITextNodeVnode => vnode?.type === VnodeType.textNode,\r\n}\r\n", "import { queueScheduler } from './scheduler'\r\nimport { is } from './shared'\r\nimport { IComponentFunction, IComponentInstance, IEffectCallback } from './types'\r\n\r\ntype IKey = string | symbol\r\n\r\n/**\r\n * \u4E0D\u7BA1\u5565\u5165\u53C2, \u8FD4\u56DE\u7684\u90FD\u662F\u4E00\u4E2A`{value: xxx}`\u7684\u5BF9\u8C61, \u5982\u679C\u5165\u53C2\u662F\u5BF9\u8C61\u5219\u8FD8\u4F1A\u9012\u5F52\u4EE3\u7406\r\n *\r\n * \u8FD9\u4E2A\u51FD\u6570\u539F\u7406\u6CA1\u5565\u597D\u89E3\u91CA\u7684, \u4E0D\u61C2\u5F97\u5EFA\u8BAE\u5148\u53BB\u5B66\u4E60\u4E0Bes6 Proxy\u7684\u7528\u6CD5\r\n */\r\nexport function reactive<T>(value: T): { value: T }\r\nexport function reactive<T = any>(): { value: T | undefined }\r\nexport function reactive(value?: unknown) {\r\n  return (function makeReactive<O extends object>(obj: O): O {\r\n    return new Proxy<O>(obj, {\r\n      get(target, key) {\r\n        track(target, key)\r\n        const gotValue = Reflect.get(target, key)\r\n        return typeof gotValue === 'object' ? makeReactive(gotValue as object) : gotValue\r\n      },\r\n      set(target, key, value) {\r\n        Reflect.set(target, key, value)\r\n        trigger(target, key)\r\n        trigger(target, ManualTrackObjectKey)\r\n        return true\r\n      },\r\n    })\r\n  })({ value })\r\n}\r\n\r\n/**\r\n * \u8FD9\u4E2A\u51FD\u6570\u4E3B\u8981\u662F\u7528\u4E8E\u6B3A\u9A97ts\u7F16\u8BD1\u5668. \u56E0\u4E3Aframe3\u4F1A\u81EA\u52A8\u7ED9\u6BCF\u4E2A\u5E26`$`\u7684\u53D8\u91CF\u52A0`.value`, \u6240\u4EE5\u5728\u5B9E\u9645\u4F7F\u7528\u8FC7\u7A0B\u4E2D,\r\n * \u5373\u4F7F\u6211\u4EEC\u975E\u5E38\u6E05\u695A\u5176\u662F\u4E2A\u5BF9\u8C61, \u4F46ts\u7F16\u8BD1\u5668\u5E76\u4E0D\u77E5\u9053, \u6240\u4EE5\u8981\u7528\u4E00\u70B9\"\u969C\u773C\u6CD5\"\u6765\u907F\u514D\u62A5\u9519. \u4E5F\u5C31\u662F\u8BF4, \u7528`reactive`\r\n * \u9700\u8981\u624B\u52A8\u52A0`.value`, \u800C`$reactive`\u4E0D\u7528. \u540E\u9762\u7684`$computed`, `$ref`\u540C\u7406\r\n */\r\nexport function $reactive<T>(value: T): T\r\nexport function $reactive<T = any>(): T | undefined\r\nexport function $reactive(value?: unknown) {\r\n  return value\r\n}\r\n\r\nlet currentEffectCallback: IEffectCallback | undefined = undefined\r\n/** \u7528\u6765\u5B58\u50A8\u5DF2\u7ECF\u78B0\u5230\u7684effect, \u7528\u4E8Eeffect\u5D4C\u5957\u8C03\u7528\u7684\u60C5\u51B5 */\r\nconst effectCallbackStack: IEffectCallback[] = []\r\nconst targetObjMap = new WeakMap<object, Map<IKey, Set<IEffectCallback>>>()\r\n\r\n/**\r\n * \u5C06\u5F53\u524D\u7684effect\u56DE\u8C03\u52A0\u5165\u5230\u89E6\u53D1set\u7684key\u7684\u56DE\u8C03\u961F\u5217\u91CC\r\n * @param targetObj \u89E6\u53D1set\u7684\u5BF9\u8C61\r\n * @param key \u89E6\u53D1set\u7684\u952E\r\n */\r\nfunction track(targetObj: object, key: IKey) {\r\n  if (!currentEffectCallback) return\r\n  if (is.array(targetObj)) {\r\n    if (key === 'length') return\r\n    key = key === ManualTrackObjectKey ? key : 'length'\r\n  }\r\n\r\n  if (!targetObjMap.get(targetObj)) {\r\n    targetObjMap.set(targetObj, new Map<IKey, Set<IEffectCallback>>())\r\n  }\r\n  const keyToCallbacksMap = targetObjMap.get(targetObj)!\r\n  if (!keyToCallbacksMap?.get(key)) {\r\n    keyToCallbacksMap.set(key, new Set<IEffectCallback>())\r\n  }\r\n  keyToCallbacksMap.get(key)!.add(currentEffectCallback)\r\n}\r\n\r\nconst ManualTrackObjectKey = Symbol('manual-track-object-key')\r\n\r\nexport function manualTrack<T extends object>(object: T) {\r\n  track(object, ManualTrackObjectKey)\r\n  return object\r\n}\r\n\r\n/**\r\n * \u4ECE\u56DE\u8C03\u961F\u5217\u91CC\u62FF\u51FAeffect\u56DE\u8C03\u53BB\u6267\u884C, \u5982\u679C\u6709\u8C03\u5EA6\u5668\u5C31\u653E\u8C03\u5EA6\u5668\u91CC\u6267\u884C\r\n * @param targetObj \u89E6\u53D1set\u7684\u5BF9\u8C61\r\n * @param key \u89E6\u53D1set\u7684\u952E\r\n */\r\nfunction trigger(targetObj: object, key: IKey) {\r\n  if (!targetObj.hasOwnProperty(key) || key === 'length') return\r\n  if (is.array(targetObj)) {\r\n    if (key === 'length') return\r\n    key = key === ManualTrackObjectKey ? key : 'length'\r\n  }\r\n\r\n  const keyToCallbacksMap = targetObjMap.get(targetObj)\r\n  const callbacks = keyToCallbacksMap?.get(key)\r\n  callbacks?.forEach((callback) => {\r\n    if (callback === currentEffectCallback) return\r\n    callback.scheduler ? callback.scheduler(callback) : callback()\r\n  })\r\n}\r\n\r\n/**\r\n * effect\u6267\u884C\u539F\u7406\u662F: \u5148\u5305\u88C5\u4E1A\u52A1\u56DE\u8C03, \u5305\u88C5\u597D\u540E\u8D4B\u503C\u7ED9currentEffectCallback, \u4E4B\u540E\u5982\u679C\u4E1A\u52A1\u56DE\u8C03\u6267\u884C\u89E6\u53D1\u4E86\u53D8\u91CF\u7684get,\r\n * \u90A3\u5C31\u628AcurrentEffectCallback\u6DFB\u52A0\u5230\u8BE5\u53D8\u91CF\u7684effect\u56DE\u8C03\u961F\u5217\u91CC, \u4E4B\u540E\u5982\u679C\u8BE5\u53D8\u91CF\u89E6\u53D1set, \u5C31\u628Aeffect\u56DE\u8C03\u4ECE\u56DE\u8C03\u961F\u5217\u91CC\u62FF\u51FA\u6765\u6267\u884C\r\n * @param callback \u4E1A\u52A1\u56DE\u8C03\r\n * @param props \u4F20\u5165\u7684\u81EA\u5B9A\u4E49props, \u53EF\u4F5C\u4E3A\u4E1A\u52A1\u56DE\u8C03\u7684\u53C2\u6570\r\n * @returns \u8FD4\u56DE\u5305\u88C5\u597D\u7684\u4E1A\u52A1\u56DE\u8C03\r\n */\r\nexport function effect<P extends Record<string, any> & { scheduler?: Function }>(\r\n  callback: (props?: P) => any,\r\n  props?: P\r\n) {\r\n  // \u5305\u88C5\u4E1A\u52A1\u56DE\u8C03, \u52A0\u4E0Aactive\u548Cscheduler\u5C5E\u6027\r\n  const effectCallback: IEffectCallback = Object.assign(\r\n    () => {\r\n      // \u653E\u5728try\u91CC\u662F\u6015\u7528\u6237\u4EE3\u7801\u62A5\u9519\r\n      try {\r\n        // \u5931\u6548\u5C31\u8FD4\u56DE\r\n        if (!effectCallback.active) return\r\n        // \u6BCF\u6B21\u6267\u884C\u90FD\u628A\u81EA\u5DF1\u52A0\u5165\u5230\u6808\u4E2D, \u5E76\u8BBE\u7F6E\u4E3A\u5F53\u524D\u7684\u56DE\u8C03\r\n        effectCallbackStack.push((currentEffectCallback = effectCallback))\r\n        // \u6267\u884C\u4E1A\u52A1\u56DE\u8C03\r\n        callback(props)\r\n        // \u4E0D\u61C2\u8FD9\u4E2Afinally\u7684\u81EA\u884C\u5B66\u4E60\r\n      } finally {\r\n        // \u6267\u884C\u5B8C\u5C31\u5F39\u51FA\r\n        effectCallbackStack.pop()\r\n        // \u5C06\u5F53\u524D\u56DE\u8C03\u8BBE\u4E3A\u6808\u91CC\u7684\u6700\u540E\u4E00\u4E2A\r\n        currentEffectCallback = effectCallbackStack.slice(-1)[0]\r\n      }\r\n    },\r\n    { active: true, scheduler: props?.scheduler || queueScheduler }\r\n  )\r\n  effectCallback()\r\n  return effectCallback\r\n}\r\n\r\n/**\r\n * \u8FD9\u4E2A\u4E0D\u89E3\u91CA\u4E86, \u61C2\u4E86effect\u539F\u7406\u8FD9\u4E2A\u81EA\u7136\u61C2\r\n */\r\nexport function computed<T>(callback: () => T): { value: T } {\r\n  const result = reactive('' as T)\r\n  effect(() => (result.value = callback()))\r\n  return result\r\n}\r\n\r\n/** \u8F6C\u5230$reactive */\r\nexport function $computed<T>(cb: () => T): T {\r\n  return cb()\r\n}\r\n\r\n/**\r\n * \u83B7\u53D6dom\u6216\u7EC4\u4EF6\u5F15\u7528\r\n */\r\nexport function ref(tagName: IComponentFunction): { value: IComponentInstance | undefined }\r\nexport function ref<K extends keyof HTMLElementTagNameMap>(tagName: K): { value: HTMLElementTagNameMap[K] | undefined }\r\nexport function ref<HTMLTagName extends keyof HTMLElementTagNameMap>(tagName: IComponentFunction | HTMLTagName) {\r\n  return typeof tagName === 'function' ? reactive<IComponentInstance>() : reactive<HTMLElementTagNameMap[HTMLTagName]>()\r\n}\r\n\r\n/** \u8F6C\u5230$reactive */\r\nexport function $ref(tagName: IComponentFunction): IComponentInstance | undefined\r\nexport function $ref<K extends keyof HTMLElementTagNameMap>(tagName: K): HTMLElementTagNameMap[K] | undefined\r\nexport function $ref<HTMLTagName extends keyof HTMLElementTagNameMap>(tagName: IComponentFunction | HTMLTagName) {\r\n  return typeof tagName === 'function'\r\n    ? $reactive<IComponentInstance>()\r\n    : $reactive<HTMLElementTagNameMap[HTMLTagName]>()\r\n}\r\n\r\nexport function nv<T>(value: T) {\r\n  return value\r\n}\r\n", "import { implementLifeCycles, initLifeCycles, setCurrentComponentInstance } from './life-cycles'\r\nimport { effect } from './reactive'\r\nimport { IComponentInstance, IComponentVnode, IVnodeProps } from './types'\r\nimport { mountVnode, specialDealVnodeChildren, unMountVnode, updateVnode } from './vnode'\r\n\r\n/**\r\n * \u9996\u5148\u660E\u786E\u4E24\u70B9, \u4EE5\u4E00\u4E2A\u7B80\u5355\u7EC4\u4EF6\u4E3A\u4F8B\r\n * ```ts\r\n * const App = () => {\r\n *  return <div>xxx</div>\r\n * }\r\n * ```\r\n * \u5B83\u4F1A\u88AB\u7F16\u8BD1\u6210\u8FD9\u6837\r\n * ```ts\r\n * const App = () => {\r\n *  return () => <div>xxx</div>\r\n * }\r\n * ```\r\n * \u8FD9\u4E2AApp\u7684\u51FD\u6570\u4F53\u662F\u7EC4\u4EF6\u51FD\u6570, \u800C\u8FD9\u4E2A\u7F16\u8BD1\u540E\u7684`() => <div>xxx</div>`\u662F\u6E32\u67D3\u51FD\u6570\r\n *\r\n * \u4E5F\u5C31\u662F\u8BF4\u7EC4\u4EF6\u51FD\u6570\u6267\u884C\u4F1A\u8FD4\u56DE\u4E00\u4E2A\u6E32\u67D3\u51FD\u6570, \u6E32\u67D3\u51FD\u6570\u6267\u884C\u624D\u8FD4\u56DEvnode\r\n */\r\nexport function mountComponentVnode(componentVnode: IComponentVnode) {\r\n  const { componentFunction, props, children } = componentVnode\r\n  const componentInstance = (componentVnode.componentInstance = {\r\n    props,\r\n    isMounted: false,\r\n    lifeCycles: initLifeCycles(),\r\n  } as IComponentInstance)\r\n\r\n  setCurrentComponentInstance(componentInstance)\r\n  let renderVnodeFunction = componentFunction({ ...props, children })\r\n\r\n  componentInstance.update = effect(() => {\r\n    const currentSubVnode = renderVnodeFunction()\r\n    const invokeLifeCycleCallbacks = implementLifeCycles(componentInstance)\r\n    currentSubVnode.children = specialDealVnodeChildren(currentSubVnode.children)\r\n\r\n    if (!componentInstance.isMounted) {\r\n      invokeLifeCycleCallbacks('beforeMount')\r\n      mountVnode(currentSubVnode)\r\n      invokeLifeCycleCallbacks('mounted')\r\n      componentInstance.isMounted = true\r\n    } else {\r\n      invokeLifeCycleCallbacks('beforeUpdate')\r\n      updateVnode(componentInstance.subVnode, currentSubVnode)\r\n      invokeLifeCycleCallbacks('updated')\r\n    }\r\n\r\n    componentVnode.el = currentSubVnode.el\r\n    componentInstance.subVnode = currentSubVnode\r\n    setCurrentComponentInstance(null)\r\n    specialDealDeepScopedCss(props, componentVnode)\r\n  })\r\n\r\n  componentInstance.passiveUpdate = (props: IVnodeProps, children: any[]) => {\r\n    componentInstance.props = props\r\n    setCurrentComponentInstance(componentInstance)\r\n    renderVnodeFunction = componentFunction({ ...props, children })\r\n    componentInstance.update()\r\n  }\r\n\r\n  if (props.hasOwnProperty('ref')) props.ref.value = componentInstance\r\n}\r\n\r\n/**\r\n * \u5982\u679C\u7EC4\u4EF6\u6709className\u7684\u8BDD\u4F1A\u628A\u7EC4\u4EF6\u7684scopeId\u7EE7\u627F\u7ED9\u5B50\u7EC4\u4EF6\u7684el\u4E0A\r\n */\r\nfunction specialDealDeepScopedCss(componentProps: IVnodeProps, componentVnode: IComponentVnode) {\r\n  if (\r\n    componentVnode.el instanceof Element &&\r\n    componentProps.hasOwnProperty('scope-id') &&\r\n    componentProps.hasOwnProperty('classes')\r\n  ) {\r\n    componentVnode.el.setAttribute('scope-' + componentProps['scope-id'], '')\r\n  }\r\n}\r\n\r\n/**\r\n * \u7531\u7236\u7EC4\u4EF6\u89E6\u53D1\u7684\u7EC4\u4EF6\u66F4\u65B0\r\n */\r\nexport function updateComponentVnode(preVnode: IComponentVnode, currentVnode: IComponentVnode) {\r\n  currentVnode.el = preVnode.el!\r\n  currentVnode.componentInstance = preVnode.componentInstance!\r\n  if (propsAndChildrenAllEqual(preVnode, currentVnode)) return\r\n  currentVnode.componentInstance.passiveUpdate(currentVnode.props, currentVnode.children)\r\n}\r\n\r\n/**\r\n * \u4E3B\u8981\u662F\u5378\u8F7D\u5176\u5B50\u96C6vnode, \u5C06\u5176\u81EA\u8EAB\u7684update\u56DE\u8C03\u8BBE\u7F6E\u4E3A\u5931\u6548, \u5E76\u540C\u65F6\u6267\u884C\u76F8\u5E94\u7684\u751F\u547D\u5468\u671F\u56DE\u8C03\r\n */\r\nexport function unMountComponentVnode({ componentInstance }: IComponentVnode) {\r\n  if (!componentInstance) return\r\n\r\n  const invokeLifeCycleCallbacks = implementLifeCycles(componentInstance)\r\n  invokeLifeCycleCallbacks('beforeUnMount')\r\n  unMountVnode(componentInstance.subVnode)\r\n  componentInstance.update.active = false\r\n  invokeLifeCycleCallbacks('unMounted')\r\n}\r\n\r\n/**\r\n * \u6D45\u5BF9\u6BD4\u524D\u540E\u4E24\u4E2Avnode\u7684props\u548Cchildren, \u6709\u4E0D\u540C\u7684\u624D\u4F1A\u66F4\u65B0\r\n */\r\nfunction propsAndChildrenAllEqual(preVnode: IComponentVnode, currentVnode: IComponentVnode) {\r\n  const { props: prevProps, children: prevChildren } = preVnode\r\n  const { props: currentProps, children: currentChildren } = currentVnode\r\n  return (\r\n    Object.keys(currentProps).every((key) => prevProps[key] === currentProps[key]) &&\r\n    Object.keys(currentChildren).every((key) => prevChildren[+key] === currentChildren[+key])\r\n  )\r\n}\r\n", "import { IElementVnode, IFragmentVnode, IVnode } from './types'\r\nimport { mountVnode, unMountVnode, updateVnode } from './vnode'\r\n\r\n/**\r\n * \u6BD4\u5BF9\u524D\u540E\u4E24\u4E2Avnode\u7684\u5B50\u96C6, \u5206\u4E3A\u5E26key\u7684\u548C\u4E0D\u5E26key\u7684\r\n */\r\nexport function diffVnodeChildren(\r\n  prevVnode: IElementVnode | IFragmentVnode,\r\n  currentVnode: IElementVnode | IFragmentVnode\r\n) {\r\n  // \u7B80\u5355\u8BA4\u4E3A\u7B2C\u4E00\u4E2A\u5B50\u8282\u70B9\u6709key\u5C31\u90FD\u6709key\r\n  if (prevVnode.children[0]?.key && currentVnode.children[0]?.key) {\r\n    diffKeyedChildren(prevVnode.children, currentVnode.children)\r\n  } else {\r\n    diffUnKeyedChildren(prevVnode.children, currentVnode.children)\r\n  }\r\n}\r\n\r\n/**\r\n * \u5BF9\u6BD4\u6CA1\u6709key\u7684\u5B50\u96C6, \u662F\u6700\u5E38\u89C1\u7684\u60C5\u51B5\r\n * \u4EE5\u6700\u77ED\u7684\u5B50\u96C6\u4F5C\u4E3A\u57FA\u51C6, \u4E00\u4E2A\u4E2A\u53BB\u5BF9\u6BD4\r\n * \u6700\u540E\u591A\u51FA\u6765\u7684, \u65B0\u5B50\u96C6\u591A\u4E86\u5C31\u6302\u8F7D, \u8001\u5B50\u96C6\u591A\u4E86\u5C31\u5378\u8F7D\r\n */\r\nfunction diffUnKeyedChildren(prevChildren: IVnode[], currentChildren: IVnode[]) {\r\n  const prevChildrenLength = prevChildren.length\r\n  const currentChildrenLength = currentChildren.length\r\n  const minChildrenLength = Math.min(prevChildrenLength, currentChildrenLength)\r\n  for (let i = 0; i < minChildrenLength; i++) {\r\n    updateVnode(prevChildren[i], currentChildren[i])\r\n  }\r\n  if (currentChildrenLength > prevChildrenLength) {\r\n    return currentChildren.slice(minChildrenLength).forEach((child) => mountVnode(child))\r\n  }\r\n  if (prevChildrenLength > currentChildrenLength) {\r\n    return prevChildren.slice(minChildrenLength).forEach((child) => unMountVnode(child))\r\n  }\r\n}\r\n\r\n/**\r\n * \u6709key\u7684\u5BF9\u6BD4, \u8FD8\u6CA1\u641E\u5B8C\r\n */\r\nfunction diffKeyedChildren(prevChildren: IVnode[], currentChildren: IVnode[]) {\r\n  let headIndex = 0\r\n  let prevChildrenTailIndex = prevChildren.length - 1\r\n  let currentChildrenTailIndex = currentChildren.length - 1\r\n\r\n  while (\r\n    headIndex <= prevChildrenTailIndex &&\r\n    headIndex <= currentChildrenTailIndex &&\r\n    isSameTypeAndKey(prevChildren[headIndex], currentChildren[headIndex])\r\n  ) {\r\n    updateVnode(prevChildren[headIndex], currentChildren[headIndex])\r\n    headIndex++\r\n  }\r\n\r\n  while (\r\n    headIndex <= prevChildrenTailIndex &&\r\n    headIndex <= currentChildrenTailIndex &&\r\n    isSameTypeAndKey(prevChildren[prevChildrenTailIndex], currentChildren[currentChildrenTailIndex])\r\n  ) {\r\n    updateVnode(prevChildren[headIndex], currentChildren[headIndex])\r\n    prevChildrenTailIndex--\r\n    currentChildrenTailIndex--\r\n  }\r\n\r\n  if (headIndex > prevChildrenTailIndex) {\r\n    for (let i = headIndex; i <= currentChildrenTailIndex; i++) {\r\n      mountVnode(currentChildren[i])\r\n    }\r\n  }\r\n\r\n  if (headIndex > currentChildrenTailIndex) {\r\n    for (let i = headIndex; i <= currentChildrenTailIndex; i++) {\r\n      unMountVnode(prevChildren[i])\r\n    }\r\n  }\r\n}\r\n\r\nfunction isSameTypeAndKey(prevVnode: IVnode, currentVnode: IVnode) {\r\n  return prevVnode.type === currentVnode.type && prevVnode.key === currentVnode.key\r\n}\r\n", "import { IElementVnode } from './types'\r\n\r\nexport function createElement(tagName: string) {\r\n  return document.createElement(tagName)\r\n}\r\n\r\nexport function createTextNode(content: string) {\r\n  return document.createTextNode(content)\r\n}\r\n\r\nexport function insertChild(el: Element | Text) {\r\n  currentParentEl?.insertBefore(el, currentAnchor)\r\n}\r\n\r\nexport function setTextContent(textContent: any, el: Element | Text = currentParentEl) {\r\n  el && (el.textContent = textContent)\r\n}\r\n\r\nexport function remove(el?: Element | Text | null) {\r\n  el?.remove()\r\n}\r\n\r\n/**\r\n * \u5F53\u524D\u7684\u7236\u771F\u5B9E\u8282\u70B9, \u7528\u4E8E\u4F5C\u4E3AinsertBefore()\u7684\u7236\u8282\u70B9, \u5728mount\u6839\u7EC4\u4EF6\u65F6\u88AB\u8D4B\u503C\u4E3A\u6839dom\u8282\u70B9\r\n */\r\nlet currentParentEl: Element\r\n/**\r\n * \u5F53\u524D\u7684\u951A\u70B9\u8282\u70B9, \u7528\u4E8E\u4F5C\u4E3AinsertBefore()\u7684\u951A\u70B9\r\n */\r\nlet currentAnchor: Node | null\r\n\r\n/**\r\n * \u8FD4\u56DE\u5F53\u524D\u7684\u7236\u771F\u5B9E\u8282\u70B9\u548C\u5F53\u524D\u7684\u951A\u70B9\u8282\u70B9\r\n */\r\nexport function getCurrentRenderContext() {\r\n  return {\r\n    /** \u5F53\u524D\u7684\u7236\u771F\u5B9E\u8282\u70B9, \u7528\u4E8E\u4F5C\u4E3AinsertBefore()\u7684\u7236\u8282\u70B9 */\r\n    currentParentEl,\r\n    /** \u5F53\u524D\u7684\u951A\u70B9\u8282\u70B9, \u7528\u4E8E\u4F5C\u4E3AinsertBefore()\u7684\u951A\u70B9 */\r\n    currentAnchor,\r\n  }\r\n}\r\n\r\n/**\r\n * \u9996\u5148\u58F0\u660E\u4E0B\u6211\u89C9\u5F97\u8FD9\u662F\u4E00\u4E2A\u5F88\u597D\u7684\u8BBE\u8BA1\r\n *\r\n * \u8FD9\u4E2A\u51FD\u6570\u7684\u529F\u80FD\u5F88\u7B80\u5355, \u5C31\u662F\u8BBE\u7F6E(\u6216\u8005\u53EB\u66F4\u65B0)\u5F53\u524D\u7684\u7236\u8282\u70B9\u548C\u951A\u70B9, \u7136\u540E\u8FD4\u56DE\u4E00\u4E2A`setBack`\u51FD\u6570, \u8C03\u7528\u5B83\u53EF\u4EE5\u518D\u6B21\u8BBE\u7F6E\u56DE\u53BB\r\n *\r\n * \u5177\u4F53\u4F5C\u7528\u5C31\u662Fmount\u6216update\u5B50\u96C6\u7684\u65F6\u5019\u8C03\u7528\u5B83, \u8BBE\u7F6E\u5B50\u8282\u70B9\u8981\u6302\u8F7D\u7684\u7236\u8282\u70B9\u548C\u63D2\u5165\u7684\u951A\u70B9(\u4E00\u822C\u5C31\u662F\u8BBE\u7F6E\u4E3A\u81EA\u5DF1).\r\n * \u5F85\u5B50\u8282\u70B9\u5904\u7406\u5B8C\u540E\u53C8\u56DE\u5230\u5F53\u524D\u51FD\u6570, \u8C03\u7528`setBack`\u8BBE\u7F6E\u56DE\u4E4B\u524D\u7684\u7236\u8282\u70B9\u548C\u951A\u70B9\r\n *\r\n * \u8FD9\u6837\u505A\u7684\u597D\u5904\u5C31\u662F\u4E0D\u7528\u5F80mount\u6216update\u5B50\u96C6\u7684\u51FD\u6570\u591A\u585E\u4E24\u4E2A\u53C2\u6570(parentNode, anchorNode), \u907F\u514D\u4E1A\u52A1\u4E00\u65E6\u590D\u6742\r\n * \u51FD\u6570\u53C2\u6570\u6570\u91CF\u5C31\u76F4\u63A5\u7206\u70B8\u7684\u60C5\u51B5, \u6211\u89C1\u8FC7\u592A\u591A10\u51E0\u4E2A\u53C2\u6570\u7684\u51FD\u6570\u4E86, \u5F88\u591A\u65F6\u5019\u5373\u4F7F\u6839\u672C\u6CA1\u7528\u4E0A, \u53EA\u662F\u56E0\u4E3A\u5B50\u51FD\u6570\u9700\u8981\u4E5F\u8981\u7559\u5728\u90A3\u91CC,\r\n * \u5BFC\u81F4\u4EE3\u7801\u6781\u96BE\u7EF4\u62A4. \u60F3\u8C61\u4E00\u4E0B, \u4F60\u770B\u5230\u8BB8\u591A10\u51E0\u4E2A\u53C2\u6570\u7684\u51FD\u6570\u8C03\u7528, \u800C\u8FD910\u51E0\u4E2A\u53C2\u6570\u90FD\u4E0D\u77E5\u9053\u5565\u610F\u601D\u4F1A\u662F\u4EC0\u4E48\u611F\u53D7.\r\n * \u800C\u8FD9\u4E9B\u6559\u8BAD\u4E5F\u76F4\u63A5\u4F53\u73B0\u5728frame3\u7684\u6E90\u7801\u91CC, frame3\u7684\u6BCF\u4E2A\u51FD\u6570\u5165\u53C2\u90FD\u4E0D\u8D85\u8FC7\u4E09\u4E2A, \u5E76\u4E14\u51FD\u6570 tsdoc 99%\u8986\u76D6, \u5C31\u662F\u4E3A\u4E86\u907F\u514D\u8FD9\u79CD\u60C5\u51B5\r\n */\r\nexport function setCurrentRenderContext({\r\n  currentParentEl: parentEl,\r\n  currentAnchor: anchorEl,\r\n}: {\r\n  currentParentEl?: Element\r\n  currentAnchor?: Node | null\r\n}) {\r\n  const { currentParentEl: prevParentEl, currentAnchor: prevAnchor } = getCurrentRenderContext()\r\n  currentAnchor = anchorEl || null\r\n  if (parentEl) currentParentEl = parentEl\r\n  /** \u5B50\u8282\u70B9\u5904\u7406\u5B8C\u540E\u53C8\u56DE\u5230\u5F53\u524D\u51FD\u6570, \u8BBE\u7F6E\u56DE\u4E4B\u524D\u7684\u7236\u8282\u70B9\u548C\u951A\u70B9 */\r\n  return function setBack() {\r\n    setCurrentRenderContext({ currentParentEl: prevParentEl, currentAnchor: prevAnchor })\r\n  }\r\n}\r\n\r\n/**\r\n * \u8BBE\u7F6Eelement\u8282\u70B9\u7684attribute. \u6BD4\u5BF9\u524D\u4E00\u4E2Avnode\u7684props\u548C\u540E\u4E00\u4E2Avnode\u7684props\r\n * \u627E\u51FA\u4E0D\u540C\u7684, \u7136\u540E\u518D\u5206\u522B\u8BBE\u7F6E\u4E0A\u53BB\r\n */\r\nexport function setVnodePropsToDomAttribute(preVnode: IElementVnode | null, currentVnode: IElementVnode, el: Element) {\r\n  const prevProps = preVnode ? preVnode.props : {}\r\n  const currentProps = currentVnode.props\r\n  const diffedProps = Object.entries(currentProps)\r\n    .map(([propKey, currentPropValue]) =>\r\n      !(propKey in prevProps)\r\n        ? [propKey, currentPropValue]\r\n        : prevProps[propKey] !== currentPropValue\r\n        ? [propKey, currentPropValue]\r\n        : undefined\r\n    )\r\n    .filter(Boolean) as [string, any][]\r\n\r\n  for (const [propkey, propValue] of diffedProps) {\r\n    if (propkey.startsWith('on')) {\r\n      el.addEventListener(propkey.slice(2).toLocaleLowerCase(), propValue)\r\n    } else if (propkey === 'style') {\r\n      const styleString = Object.entries(propValue)\r\n        .map(([csskey, cssValue]) => `${csskey}: ${cssValue}`)\r\n        .join(';')\r\n      el.setAttribute('style', styleString)\r\n    } else if (propkey === 'ref') {\r\n      propValue.value = el\r\n    } else if (propkey === 'classes') {\r\n      el.className = ''\r\n      const classes = Array.isArray(propValue) ? propValue : [propValue]\r\n      classes.filter(Boolean).forEach((_class) => el.classList.add(_class))\r\n    } else if (propkey === 'scope-id') {\r\n      el.setAttribute(`scope-${propValue}`, '')\r\n    } else {\r\n      el.setAttribute(propkey, propValue)\r\n    }\r\n  }\r\n}\r\n", "import { mountComponentVnode, unMountComponentVnode, updateComponentVnode } from './component'\r\nimport { diffVnodeChildren } from './diff'\r\nimport {\r\n  getCurrentRenderContext,\r\n  insertChild,\r\n  remove,\r\n  setCurrentRenderContext,\r\n  setTextContent,\r\n  setVnodePropsToDomAttribute,\r\n} from './render-dom'\r\nimport { is, vnodeIs } from './shared'\r\nimport {\r\n  IComponentFunction,\r\n  IComponentVnode,\r\n  IElementVnode,\r\n  IFragmentVnode,\r\n  ITextNodeVnode,\r\n  IVnode,\r\n  IVnodeJsxTag,\r\n  IVnodeProps,\r\n  VnodeType,\r\n} from './types'\r\n\r\n/**\r\n * @description \u751F\u6210 vnode \u7684\u51FD\u6570\r\n * @param jsxTag jsx\u7684tag, \u6BD4\u5982div, App\u7B49, \u53EF\u4EE5\u662F\u51FD\u6570, \u5B57\u7B26\u4E32, \u7A7A\u6570\u7EC4, \u6216 0\r\n * @param props \u51FD\u6570\u7EC4\u4EF6\u7684props\u4F5C\u4E3Avnode\u7684props\r\n * @param children jsx\u7684\u5B50\u8282\u70B9\r\n * @returns \u8FD4\u56DEvnode\r\n */\r\nexport function h(jsxTag: 0, props?: IVnodeProps, children?: any[]): ITextNodeVnode\r\nexport function h(jsxTag: [], props?: IVnodeProps, children?: any[]): IFragmentVnode\r\nexport function h(jsxTag: string, props?: IVnodeProps, children?: any[]): IElementVnode\r\nexport function h(jsxTag: IComponentFunction, props?: IVnodeProps, children?: any[]): IComponentVnode\r\nexport function h(jsxTag: IVnodeJsxTag, props: IVnodeProps = {}, children: any[] = []): IVnode {\r\n  const vnodeBase = { props, children, el: null, key: props.key }\r\n  const { textNode, component, fragment, element } = VnodeType\r\n\r\n  if (jsxTag === 0) return { type: textNode, ...vnodeBase }\r\n  else vnodeBase.children = specialDealVnodeChildren(vnodeBase.children)\r\n\r\n  if (is.string(jsxTag)) return { type: element, tagName: jsxTag, ...vnodeBase }\r\n  if (is.array(jsxTag)) return { type: fragment, anchor: null, ...vnodeBase }\r\n  return { type: component, componentFunction: jsxTag, componentInstance: null, ...vnodeBase }\r\n}\r\n\r\n/**\r\n * \u5305\u88C5\u5B50\u96C6, \u5C06string | number | undefined | null | false\u7C7B\u578B\u5168\u5904\u7406\u6210\u6587\u672Cvnode,\r\n * \u5C06\u6570\u7EC4\u7C7B\u578B\u7684\u5305\u88C5\u6210 fragment vnode\r\n */\r\nexport function specialDealVnodeChildren(children: any[]): IVnode[] {\r\n  const newVnodeChildren: IVnode[] = []\r\n  children.forEach((child) => {\r\n    if (is.string(child) || is.number(child)) return newVnodeChildren.push(h(0, {}, [child]))\r\n    if ([undefined, null, false].includes(child)) return newVnodeChildren.push(h(0, {}, ['']))\r\n    if (is.array(child)) return newVnodeChildren.push(h([], {}, specialDealVnodeChildren(child)))\r\n    newVnodeChildren.push(child)\r\n  })\r\n  return newVnodeChildren\r\n}\r\n\r\n/**\r\n * \u4ECE\u865A\u62DFdom\u4E2D\u521B\u5EFA\u771F\u5B9Edom\u8282\u70B9\u5E76\u6302\u8F7D\u5230\u76EE\u6807dom\u8282\u70B9\r\n */\r\nexport function mountVnode(vnode: IVnode) {\r\n  if (vnodeIs.component(vnode)) return mountComponentVnode(vnode)\r\n  if (vnodeIs.fragment(vnode)) return mountFragmentVnode(vnode)\r\n  if (vnodeIs.element(vnode)) return mountElementVnode(vnode)\r\n  if (vnodeIs.textNode(vnode)) return mountTextNodeVnode(vnode)\r\n}\r\n\r\n/**\r\n * \u5982\u679C\u524D\u540Evnode\u7C7B\u578B\u76F8\u540C\u5C31\u8FDB\u884C\u6BD4\u5BF9\u66F4\u65B0, \u4E0D\u76F8\u540C\u5C31\u66FF\u6362\r\n */\r\nexport function updateVnode(preVnode: IVnode, currentVnode: IVnode) {\r\n  if (vnodeIs.component(currentVnode) && vnodeIs.component(preVnode))\r\n    return updateComponentVnode(preVnode, currentVnode)\r\n  if (vnodeIs.fragment(currentVnode) && vnodeIs.fragment(preVnode)) return updateFragmentVnode(preVnode, currentVnode)\r\n  if (vnodeIs.element(currentVnode) && vnodeIs.element(preVnode)) return updateElementVnode(preVnode, currentVnode)\r\n  if (vnodeIs.textNode(currentVnode) && vnodeIs.textNode(preVnode)) return updateTextNodeVnode(preVnode, currentVnode)\r\n  return replaceVnode(preVnode, currentVnode)\r\n}\r\n\r\n/**\r\n * \u5378\u8F7D\u524D\u4E00\u4E2Avnode, \u6302\u8F7D\u5F53\u524D\u7684vnode\r\n */\r\nexport function replaceVnode(preVnode: IVnode, currentVnode: IVnode) {\r\n  const setBack = setCurrentRenderContext({ currentAnchor: preVnode.el?.nextSibling })\r\n  unMountVnode(preVnode)\r\n  mountVnode(currentVnode)\r\n  setBack()\r\n}\r\n\r\n/**\r\n * \u5982\u679C\u662Fcomponent\u6216fragment\u5C31\u8D70\u7279\u6B8A\u6D41\u7A0B, element\u6216textNode\u5C31\u76F4\u63A5\u79FB\u9664\r\n */\r\nexport function unMountVnode(vnode: IVnode): void {\r\n  if (vnodeIs.component(vnode)) return unMountComponentVnode(vnode)\r\n  if (vnodeIs.fragment(vnode)) return unMountFragmentVnode(vnode)\r\n  return remove(vnode?.el)\r\n}\r\n\r\nexport function mountFragmentVnode(fragmentVnode: IFragmentVnode) {\r\n  const el = (fragmentVnode.el = document.createTextNode(''))\r\n  const anchor = (fragmentVnode.anchor = document.createTextNode(''))\r\n  insertChild(el)\r\n  insertChild(anchor)\r\n\r\n  const { currentParentEl } = getCurrentRenderContext()\r\n  for (const childVnode of fragmentVnode.children) {\r\n    const setBack = setCurrentRenderContext({ currentAnchor: anchor, currentParentEl })\r\n    mountVnode(childVnode)\r\n    setBack()\r\n  }\r\n}\r\n\r\nexport function updateFragmentVnode(preVnode: IFragmentVnode, currentVnode: IFragmentVnode) {\r\n  const currentParentEl = (currentVnode.el = preVnode.el)?.parentElement!\r\n  const currentAnchorEl = (currentVnode.anchor = preVnode.anchor)\r\n  const setBack = setCurrentRenderContext({ currentAnchor: currentAnchorEl, currentParentEl })\r\n\r\n  diffVnodeChildren(preVnode, currentVnode)\r\n  setBack()\r\n}\r\n\r\nexport function unMountFragmentVnode(fragmentVnode: IFragmentVnode) {\r\n  let { el, anchor } = fragmentVnode\r\n  // \u5FAA\u73AF\u627E\u51FA\u5939\u5728el\u548Canchor\u4E2D\u95F4\u7684\u8282\u70B9\u5220\u9664\u6389\r\n  while (el !== anchor) {\r\n    let nextSibling = el?.nextSibling as any\r\n    remove(el)\r\n    el = nextSibling\r\n  }\r\n  remove(anchor)\r\n}\r\n\r\nexport function mountElementVnode(elementVnode: IElementVnode) {\r\n  const el = document.createElement(elementVnode.tagName)\r\n  setVnodePropsToDomAttribute(null, elementVnode, el)\r\n  insertChild((elementVnode.el = el))\r\n\r\n  for (const childVnode of elementVnode.children) {\r\n    setCurrentRenderContext({ currentParentEl: el })\r\n    mountVnode(childVnode)\r\n  }\r\n}\r\n\r\nexport function updateElementVnode(preVnode: IElementVnode, currentVnode: IElementVnode) {\r\n  const el = (currentVnode.el = preVnode.el)\r\n  if (!el) return\r\n\r\n  setVnodePropsToDomAttribute(preVnode, currentVnode, el)\r\n  const setBack = setCurrentRenderContext({ currentParentEl: el })\r\n  diffVnodeChildren(preVnode, currentVnode)\r\n  setBack()\r\n}\r\n\r\nexport function mountTextNodeVnode(textNodeVnode: ITextNodeVnode) {\r\n  const textNode = document.createTextNode(textNodeVnode.children[0].toString())\r\n  insertChild((textNodeVnode.el = textNode))\r\n}\r\n\r\nexport function updateTextNodeVnode(preVnode: IVnode, currentVnode: IVnode) {\r\n  const el = (currentVnode.el = preVnode.el)\r\n  const prevText = preVnode.children[0].toString()\r\n  const currentText = currentVnode.children[0].toString()\r\n  if (!el || currentText === prevText) return\r\n\r\n  setTextContent(currentText, el)\r\n}\r\n\r\nexport function mount(componentFunction: Function, parentDom: Element): void {\r\n  setCurrentRenderContext({ currentParentEl: parentDom })\r\n  mountComponentVnode(h(componentFunction as IComponentFunction, {}, []))\r\n}\r\n", "import { effect, reactive } from './reactive'\r\nimport { h } from './vnode'\r\n\r\ninterface IRouter {\r\n  path: string\r\n  component: any\r\n}\r\n\r\nconst hash = reactive(getHash())\r\nwindow.addEventListener('hashchange', (e) => {\r\n  hash.value = getHash()\r\n})\r\n\r\nexport function Router({ path, component }: IRouter) {\r\n  const props = reactive<Record<string, any>>()\r\n  const shouldRender = reactive(false)\r\n  effect(() => {\r\n    const { isMatch, params } = matchPath(path, hash.value)\r\n    shouldRender.value = isMatch\r\n    props.value = params\r\n  })\r\n  return () => h([], {}, shouldRender.value ? [h(component, props.value, [])] : [])\r\n}\r\n\r\nfunction matchPath(path: string, hash: string) {\r\n  if (!/:\\w+/.test(path)) return { isMatch: path === hash, params: {} }\r\n\r\n  let paramName = ''\r\n  let reString = path.replace(/(.*)(:\\w+)/, (_, $1, $2) => {\r\n    paramName = $2.slice(1)\r\n    return $1 + '(.*)'\r\n  })\r\n  const matchRes = hash.match(new RegExp(reString))\r\n  return {\r\n    isMatch: !!matchRes,\r\n    params: { [paramName]: matchRes?.[1] },\r\n  }\r\n}\r\n\r\nfunction getHash() {\r\n  return location.hash.slice(1).replace(/\\/$/, '')\r\n}\r\n", "export let theme: Record<string, any> = {}\r\n\r\nexport function defineTheme<T extends Record<string, any>>(_theme: T): T {\r\n  return (theme = _theme)\r\n}\r\n"],
  "mappings": "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",
  "names": ["VnodeType", "LifeCycle", "currentComponentInstance", "setCurrentComponentInstance", "componentInstance", "initLifeCycles", "LifeCycle", "key", "implementLifeCycles", "type", "callback", "onBeforeMount", "injectLifeCycle", "onMounted", "onBeforeUpdate", "onUpdated", "onBeforeUnMount", "onUnMounted", "callbacks", "effectQueue", "promiseResolve", "tickStatus", "currentPromiseResolve", "queueScheduler", "effect", "effectQueue", "effectQueueAddedToTickMicrotasks", "tickStatus", "currentPromiseResolve", "promiseResolve", "runAllEffectsInOneTick", "is", "obj", "types", "type", "vnodeIs", "vnode", "VnodeType", "reactive", "value", "makeReactive", "obj", "target", "key", "track", "gotValue", "trigger", "ManualTrackObjectKey", "$reactive", "currentEffectCallback", "effectCallbackStack", "targetObjMap", "targetObj", "is", "keyToCallbacksMap", "manualTrack", "object", "callback", "effect", "props", "effectCallback", "queueScheduler", "computed", "result", "$computed", "cb", "ref", "tagName", "$ref", "nv", "mountComponentVnode", "componentVnode", "componentFunction", "props", "children", "componentInstance", "initLifeCycles", "setCurrentComponentInstance", "renderVnodeFunction", "effect", "currentSubVnode", "invokeLifeCycleCallbacks", "implementLifeCycles", "specialDealVnodeChildren", "updateVnode", "mountVnode", "specialDealDeepScopedCss", "componentProps", "updateComponentVnode", "preVnode", "currentVnode", "propsAndChildrenAllEqual", "unMountComponentVnode", "unMountVnode", "prevProps", "prevChildren", "currentProps", "currentChildren", "key", "diffVnodeChildren", "prevVnode", "currentVnode", "diffKeyedChildren", "diffUnKeyedChildren", "prevChildren", "currentChildren", "prevChildrenLength", "currentChildrenLength", "minChildrenLength", "i", "updateVnode", "child", "mountVnode", "unMountVnode", "headIndex", "prevChildrenTailIndex", "currentChildrenTailIndex", "isSameTypeAndKey", "insertChild", "el", "currentParentEl", "currentAnchor", "setTextContent", "textContent", "remove", "getCurrentRenderContext", "setCurrentRenderContext", "parentEl", "anchorEl", "prevParentEl", "prevAnchor", "setVnodePropsToDomAttribute", "preVnode", "currentVnode", "prevProps", "currentProps", "diffedProps", "propKey", "currentPropValue", "propkey", "propValue", "styleString", "csskey", "cssValue", "_class", "h", "jsxTag", "props", "children", "vnodeBase", "textNode", "component", "fragment", "element", "VnodeType", "specialDealVnodeChildren", "is", "newVnodeChildren", "child", "mountVnode", "vnode", "vnodeIs", "mountComponentVnode", "mountFragmentVnode", "mountElementVnode", "mountTextNodeVnode", "updateVnode", "preVnode", "currentVnode", "updateComponentVnode", "updateFragmentVnode", "updateElementVnode", "updateTextNodeVnode", "replaceVnode", "setBack", "setCurrentRenderContext", "unMountVnode", "unMountComponentVnode", "unMountFragmentVnode", "remove", "fragmentVnode", "el", "anchor", "insertChild", "currentParentEl", "getCurrentRenderContext", "childVnode", "currentAnchorEl", "diffVnodeChildren", "nextSibling", "elementVnode", "setVnodePropsToDomAttribute", "textNodeVnode", "prevText", "currentText", "setTextContent", "mount", "componentFunction", "parentDom", "hash", "reactive", "getHash", "Router", "path", "component", "props", "shouldRender", "effect", "isMatch", "params", "matchPath", "h", "paramName", "reString", "_", "$1", "$2", "matchRes", "theme", "defineTheme", "_theme"]
}
