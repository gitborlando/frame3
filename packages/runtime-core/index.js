var a={string:e=>Object.prototype.toString.call(e)==="[object String]",number:e=>Object.prototype.toString.call(e)==="[object Number]",boolean:e=>Object.prototype.toString.call(e)==="[object Boolean]",undefined:e=>Object.prototype.toString.call(e)==="[object Undefined]",null:e=>Object.prototype.toString.call(e)==="[object Null]",function:e=>Object.prototype.toString.call(e)==="[object Function]",object:e=>Object.prototype.toString.call(e)==="[object Object]",array:e=>Object.prototype.toString.call(e)==="[object Array]"};function E(e){return function n(t){return new Proxy(t,{get(o,i){P(o,i);let l=Reflect.get(o,i);return typeof l=="object"?n(l):l},set(o,i,l){return Reflect.set(o,i,l),N(o,i),N(o,V),!0}})}({value:e})}function g(e){return e}var u,y=[],b=new WeakMap;function P(e,n){if(!u)return;if(a.array(e)){if(n==="length")return;n=n===V?n:"length"}b.get(e)||b.set(e,new Map);let t=b.get(e);t?.get(n)||t.set(n,new Set),u.shouldTrack&&t.get(n).add(u)}var V=Symbol("manual-track-object-key");function H(e){return P(e,V),e}function N(e,n){if(!e.hasOwnProperty(n)||n==="length")return;if(a.array(e)){if(n==="length")return;n=n===V?n:"length"}b.get(e)?.get(n)?.forEach(i=>i!==u&&i())}function h(e,n){let t=Object.assign(()=>{try{y.push(u=t);let o=y.slice(-2,-1)[0];if(o&&!o.isFirstRun){u.shouldTrack=!1;return}e(n),u.isFirstRun=!1}finally{y.pop(),u=y.slice(-1)[0]}},{isFirstRun:!0,shouldTrack:!0,scheduler:n?.scheduler});t()}function R(e){let n=E("");return h(()=>n.value=e()),n}function B(e){return e()}function U(e){return E()}function A(e){return g()}var p={element:"element",textNode:"textNode",component:"component"};function j(e,n){let{jsxTag:t,props:o}=e,i={isMounted:!1,props:o};e.componentInstance=i;let l=t(o);i.update=()=>{if(!i.isMounted){let m=l();return m.children=T(m.children),d(m,n),i.subVnode=m,e.el=m.el,i.isMounted=!0}let c=i.subVnode,s=l();s.children=T(s.children),I(c,s,n),i.subVnode=s,e.el=s.el},i.passiveUpdate=c=>{l=t(c),i.props=c,i.update()},h(i.update),o.hasOwnProperty("ref")&&(o.ref.value=i)}function k(e,n,t){n.componentInstance=e.componentInstance,!J(e.props,n.props)&&n.componentInstance.passiveUpdate(n.props)}function J(e,n){return Object.keys(n).every(t=>e[t]===n[t])}function F(e,n,t){if(f(e)||f(n)){if(f(e)&&f(n)&&(t.textContent=n.children[0].children[0]),f(e)&&!f(n))for(let o of n.children)d(o,t);!f(n)&&f(n)&&(x(e),t.textContent=n.children[0].children[0])}e.children[0].key&&n.children[0].key?q(e.children,n.children,t):W(e.children,n.children,t)}function f(e){return e.children.length===1&&e.children[0]?.type===p.textNode}function W(e,n,t){let o=e.length,i=n.length,l=Math.min(o,i);for(let c=0;c<l;c++)I(e[c],n[c],t);if(i>o)return n.slice(l).forEach(c=>d(c,t));if(o>i)return e.slice(l).forEach(c=>x(c))}function q(e,n,t){let o=0,i=e.length-1,l=n.length-1;for(;o<=i&&o<=l&&M(e[o],n[o]);)I(e[o],n[o],t),o++;for(;o<=i&&o<=l&&M(e[i],n[l]);)I(e[o],n[o],t),i--,l--;if(console.log(o,i,l),o>i)for(let c=o;c<=l;c++)d(n[c],t);if(o>l)for(let c=o;c<=l;c++)x(e[c])}function M(e,n){return e.type===n.type&&e.key===n.key}function O(e,n){let t=document.createElement(e.jsxTag);n.appendChild(e.el=t),K(null,e,t);for(let o of e.children)d(o,t)}function S(e,n,t){let o=n.el=e.el;o&&(K(e,n,o),F(e,n,o))}function v(e,n){let t=document.createTextNode(e.children[0].toString());n.appendChild(e.el=t)}function L(e,n,t){let o=n.el=e.el;o&&(o.textContent=n.children[0].toString())}function K(e,n,t){let o=e?e.props:{},i=n.props,l=Object.entries(i).map(([c,s])=>c in o?o[c]!==s?[c,s]:void 0:[c,s]).filter(Boolean);for(let[c,s]of l)if(c.startsWith("on"))t.addEventListener(c.slice(2).toLocaleLowerCase(),s);else if(c==="style"){let m=Object.entries(s).map(([$,w])=>`${$}: ${w}`).join(";");t.setAttribute("style",m)}else c==="ref"?s.value=t:c==="className"?t.className=s:c==="scope-id"?t.setAttribute(`scope-${s}`,""):t.setAttribute(c,s)}function C(e,n={},t=[]){let o={props:n,children:t,el:null,componentInstance:null,key:n.key};return e===0?{type:p.textNode,jsxTag:e,...o}:a.string(e)?(o.children=T(o.children),{type:p.element,jsxTag:e,...o}):{type:p.component,jsxTag:e,...o}}function T(e){let n=[];return e.forEach(t=>{if(a.string(t)||a.number(t))return n.push(C(0,{},[t]));if(a.array(t))return n.push(...T(t));a.undefined(t)||a.null(t)||n.push(t)}),n}function z(e,n){j(C(typeof e=="function"?e:()=>()=>e,{},[]),n)}function d(e,n){if(r.component(e))return j(e,n);if(r.element(e))return O(e,n);if(r.textNode(e))return v(e,n)}function I(e,n,t){if(r.component(n)&&r.component(e))return k(e,n,t);if(r.element(n)&&r.element(e))return S(e,n,t);if(r.textNode(n)&&r.textNode(e))return L(e,n,t);x(e),d(n,t)}function x(e){r.component(e)&&e.componentInstance?x(e.componentInstance.subVnode):e.el?.remove()}var r={component:e=>e?.type===p.component,element:e=>e?.type===p.element,textNode:e=>e?.type===p.textNode};export{B as $computed,g as $reactive,A as $ref,R as computed,h as effect,C as h,H as manualTrack,z as mount,E as reactive,U as ref};
